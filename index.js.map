{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48284605-8cfffb6b97886c5ff39067830';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  const { data } = await axios.get(url);\n\n  if (!data.hits.length) {\n    throw new Error('No images found');\n  }\n\n  return data;\n}\n","const gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nexport function renderGallery(images, totalHits, currentPage, perPage) {\n  if (images.length === 0) {\n    hideLoadMoreButton();\n  } else {\n    const markup = images\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `\n      <a href=\"${largeImageURL}\" class=\"gallery__item\">\n        <div class=\"photo-card\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          <div class=\"info\">\n            <p class=\"info-item\"><b>Likes:</b> ${likes}</p>\n            <p class=\"info-item\"><b>Views:</b> ${views}</p>\n            <p class=\"info-item\"><b>Comments:</b> ${comments}</p>\n            <p class=\"info-item\"><b>Downloads:</b> ${downloads}</p>\n          </div>\n        </div>\n      </a>\n    `\n      )\n      .join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    if (currentPage * perPage < totalHits) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n    }\n  }\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n  hideLoadMoreButton();\n}\n\nexport function showLoadingIndicator() {\n  loader.classList.remove('hidden');\n  loader.classList.add('visible');\n  loader.classList.add('animate__animated', 'animate__fadeIn');\n}\n\nexport function hideLoadingIndicator() {\n  setTimeout(() => {\n    loader.classList.add('hidden');\n    loader.classList.remove('animate__fadeIn');\n  }, 500);\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hidden');\n  loadMoreBtn.classList.add('visible');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('hidden');\n}\n\nexport function scrollPage() {\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  clearGallery,\n  showLoadingIndicator,\n  hideLoadingIndicator,\n  scrollPage,\n} from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet query = '';\nlet totalHits = 0;\nconst perPage = 15;\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  query = e.target.elements.searchQuery.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term!',\n    });\n    return;\n  }\n\n  clearGallery();\n  currentPage = 1;\n\n  try {\n    showLoadingIndicator();\n    const { hits, totalHits: total } = await fetchImages(\n      query,\n      currentPage,\n      perPage\n    );\n    totalHits = total;\n\n    if (!hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message: 'No images found. Try again!',\n      });\n      return;\n    }\n\n    renderGallery(hits, totalHits, currentPage, perPage);\n    lightbox.refresh();\n    iziToast.success({\n      title: 'Success',\n      message: `Found ${totalHits} images!`,\n    });\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  } finally {\n    hideLoadingIndicator();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n\n  try {\n    showLoadingIndicator();\n    const { hits } = await fetchImages(query, currentPage, perPage);\n\n    renderGallery(hits, totalHits, currentPage, perPage);\n    lightbox.refresh();\n    scrollPage();\n\n    if (currentPage * perPage >= totalHits) {\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  } finally {\n    hideLoadingIndicator();\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","data","axios","gallery","loader","loadMoreBtn","renderGallery","images","totalHits","currentPage","hideLoadMoreButton","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoadMoreButton","clearGallery","showLoadingIndicator","hideLoadingIndicator","scrollPage","cardHeight","form","lightbox","SimpleLightbox","e","iziToast","hits","total"],"mappings":"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"}